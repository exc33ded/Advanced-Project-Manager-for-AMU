{% extends "student/base_students.html" %}

{% block content %}
<h2 class="text-3xl font-semibold text-gray-800 mb-6">Edit Task: {{ task.title }}</h2>

<div class="bg-white p-8 rounded-lg shadow-md max-w-3xl mx-auto">
    <form action="{{ url_for('student_routes.edit_task', task_id=task.id) }}" method="POST" class="space-y-6">
        <!-- Task Title -->
        <div>
            <label for="title" class="block text-lg font-medium text-gray-700">Task Title</label>
            <input type="text" name="title" value="{{ task.title }}" required 
                   class="mt-2 p-3 w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <!-- Task Description -->
        <div>
            <label for="description" class="block text-lg font-medium text-gray-700">Task Description</label>
            <textarea name="description" required 
                      class="mt-2 p-3 w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" rows="4">{{ task.description }}</textarea>
        </div>

        <!-- Due Date -->
        <div>
            <label for="due_date" class="block text-lg font-medium text-gray-700">Due Date</label>
            <input type="date" name="due_date" value="{{ formatted_due_date }}" required
                   class="mt-2 p-3 w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <!-- Task Status -->
        <div>
            <label for="status" class="block text-lg font-medium text-gray-700">Task Status</label>
            <select name="status" required 
                    class="mt-2 p-3 w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="Backlog" {% if task.status == 'Backlog' %} selected {% endif %}>Backlog</option>
                <option value="In Progress" {% if task.status == 'In Progress' %} selected {% endif %}>In Progress</option>
                <option value="Progressed" {% if task.status == 'Progressed' %} selected {% endif %}>Progressed</option>
                <option value="Finished" {% if task.status == 'Finished' %} selected {% endif %}>Finished</option>
            </select>
        </div>

        <!-- Submit Button -->
        <div>
            <button type="submit" 
                    class="w-full py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                Update Task
            </button>
        </div>
    </form>
</div>

<a href="{{ url_for('student_routes.view_tasks', project_id=task.project_id) }}" class="text-blue-600 mt-4 inline-block hover:underline">Back to Task List</a>
{% endblock %}
